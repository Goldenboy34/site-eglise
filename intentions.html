<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Demande de Messe</title>
<link rel="stylesheet" href="css/style.css">
<style>
body { font-family: 'Poppins', sans-serif; background: #f4f7fb; margin:0; padding:0; display:flex; justify-content:center; }
main { background:white; max-width:600px; width:100%; border-radius:15px; padding:30px; margin:30px; box-shadow:0 8px 20px rgba(0,0,0,0.15);}
h1 { text-align:center; color:#0d47a1; margin-bottom:20px;}
label { font-weight:600; margin-top:10px; display:block;}
input, textarea, select { width:100%; padding:10px; border-radius:8px; border:1px solid #ccc; margin-top:5px;}
textarea { resize: vertical; min-height:100px;}
button { background:#0d47a1; color:white; padding:12px 25px; border:none; border-radius:12px; cursor:pointer; font-weight:700; margin-top:15px; width:100%; }
button:hover { background:#1565c0; }
</style>
</head>
<body>
<main>
<h1>Demande d'Intention de Messe</h1>
<form id="demandeForm">
<label for="intention">Intention :</label>
<textarea id="intention" required placeholder="Écrivez votre intention ici..."></textarea>
<label for="date">Date :</label>
<input type="date" id="date" required>
<label for="type">Type de messe :</label>
<select id="type" required>
<option>Messe de semaine</option>
<option>Messe du dimanche</option>
<option>Tridum</option>
<option>Neuvaine</option>
</select>
<label for="heure">Heure :</label>
<input type="time" id="heure" required>
<label for="contact">Contact :</label>
<input type="text" id="contact" required>
<button type="submit">Envoyer la demande</button>
</form>
</main>

<script src="https://cdnjs.cloudflare.com/ajax/libs/jspdf/2.5.1/jspdf.umd.min.js"></script>
<script>
document.getElementById('demandeForm').addEventListener('submit', function(e){
    e.preventDefault();
    const data = {
        username: JSON.parse(sessionStorage.getItem("currentUser")).username,
        intention: document.getElementById("intention").value,
        date: document.getElementById("date").value,
        type: document.getElementById("type").value,
        heure: document.getElementById("heure").value,
        contact: document.getElementById("contact").value
    };
    localStorage.setItem("demandeMesse", JSON.stringify(data));
    alert("Demande enregistrée ! Vous pouvez maintenant télécharger votre reçu et envoyer l'email.");
    window.location.href="recu.html";
});
</script>
</body>
</html>
