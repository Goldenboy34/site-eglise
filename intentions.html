<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Intention de Messe</title>
<link rel="stylesheet" href="css/style.css">
</head>
<body>

<nav class="navbar">
  <div class="nav-container">
    <a href="index.html" class="logo">
      <img src="images/logo.jpg" alt="Logo Paroisse" class="logo-paroisse-nav">
      Paroisse Demakope
    </a>
    <ul class="nav-links">
      <li><a href="index.html">Accueil</a></li>
      <li><a href="activites.html">Activités</a></li>
      <li><a href="intention.html" class="active">Intention de messe</a></li>
      <li><a href="paiement.html">Paiement</a></li>
      <li><a href="contact.html">Contact</a></li>
    </ul>
    <div class="menu-icon" onclick="toggleMenu()">&#9776;</div>
  </div>
</nav>

<section class="section-container">
  <h2>Formulaire d'Intention de Messe</h2>
  <form id="intention-form">
    <input type="text" id="nom" placeholder="Votre nom" required>
    <input type="date" id="date" required>
    <select id="type_messe" required>
      <option value="">Type de messe</option>
      <option value="Messe de semaine">Messe de semaine</option>
      <option value="Messe du dimanche">Messe du dimanche</option>
      <option value="Tridum">Tridum</option>
      <option value="Neuvaine">Neuvaine</option>
    </select>
    <input type="time" id="heure" required>
    <input type="text" id="intention" placeholder="Intention" required>
    <input type="text" id="contact" placeholder="Contact (tel/email)" required>
    <button type="submit" id="submit-btn" disabled>Envoyer (après paiement)</button>
  </form>
  <p id="paiement-msg" style="color:#0d47a1; margin-top:10px;">Veuillez effectuer le paiement avant d'envoyer le formulaire.</p>
</section>

<script>
function toggleMenu() {
  document.querySelector('.nav-links').classList.toggle('active');
}

const submitBtn = document.getElementById('submit-btn');

// Activer le formulaire uniquement si paiement effectué
const paiementEffectue = sessionStorage.getItem('paiementEffectue') === 'true';
if(paiementEffectue) {
  submitBtn.disabled = false;
  document.getElementById('paiement-msg').style.display = 'none';
}

// Sauvegarde des données
document.getElementById('intention-form').addEventListener('submit', (e)=>{
  e.preventDefault();
  const data = {
    nom: document.getElementById('nom').value,
    date: document.getElementById('date').value,
    type_messe: document.getElementById('type_messe').value,
    heure: document.getElementById('heure').value,
    intention: document.getElementById('intention').value,
    contact: document.getElementById('contact').value
  };
  sessionStorage.setItem('intentionMesseData', JSON.stringify(data));
  alert("Intention enregistrée !");
  window.location.href = "recu.html";
});
</script>

</body>
</html>
